<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞—Ç–æ—á–∫–∏ –∫–æ–Ω—å–∫–æ–≤</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    <meta name="theme-color" content="#ffffff">
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --accent-color: #007bff;
            --card-bg: #f8f9fa;
        }
        body.dark {
            --bg-color: #121212;
            --text-color: #ffffff;
            --accent-color: #bb86fc;
            --card-bg: #1e1e1e;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 400px;
            width: 100%;
            padding: 20px;
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        select, button {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            opacity: 0.9;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            background-color: var(--bg-color);
            border-radius: 5px;
            text-align: center;
        }
        .switchers {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .theme-toggle, .lang-toggle {
            display: flex;
            align-items: center;
        }
        .theme-toggle span, .lang-toggle span {
            margin-right: 10px;
        }
        .toggle {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }
        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--accent-color);
        }
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        .icon {
            font-size: 20px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞—Ç–æ—á–∫–∏ –∫–æ–Ω—å–∫–æ–≤</h1>
        <div class="switchers">
            <div class="theme-toggle">
                <span id="theme-label">–¢–µ–º–∞:</span>
                <label class="toggle">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider"></span>
                </label>
                <span class="icon" id="theme-icon">‚òÄÔ∏è</span>
            </div>
            <div class="lang-toggle">
                <span id="lang-label">–Ø–∑—ã–∫:</span>
                <label class="toggle">
                    <input type="checkbox" id="lang-switch">
                    <span class="slider"></span>
                </label>
                <span class="icon" id="lang-icon">RU</span>
            </div>
        </div>
        <label for="style" id="style-label">–°—Ç–∏–ª—å –∫–∞—Ç–∞–Ω–∏—è:</label>
        <select id="style">
            <option value="hockey">–•–æ–∫–∫–µ–π (–∏–≥—Ä–æ–≤–æ–π)</option>
            <option value="figure_freestyle">–§–∏–≥—É—Ä–Ω–æ–µ (—Ñ—Ä–∏—Å—Ç–∞–π–ª)</option>
            <option value="figure_dance">–§–∏–≥—É—Ä–Ω–æ–µ (—Ç–∞–Ω—Ü—ã)</option>
            <option value="speed_long">–°–ø–∏–¥—Å–∫–µ–π—Ç–∏–Ω–≥ (–¥–ª–∏–Ω–Ω—ã–π —Ç—Ä–µ–∫)</option>
            <option value="speed_short">–°–ø–∏–¥—Å–∫–µ–π—Ç–∏–Ω–≥ (—à–æ—Ä—Ç-—Ç—Ä–µ–∫)</option>
        </select>
        <label for="level" id="level-label">–£—Ä–æ–≤–µ–Ω—å –∫–∞—Ç–∞–Ω–∏—è:</label>
        <select id="level">
            <option value="beginner">–ù–æ–≤–∏—á–æ–∫</option>
            <option value="intermediate">–°—Ä–µ–¥–Ω–∏–π</option>
            <option value="advanced">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
        </select>
        <label for="weight" id="weight-label">–í–µ—Å–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
        <select id="weight">
            <option value="light">–õ—ë–≥–∫–∏–π (<60 –∫–≥)</option>
            <option value="medium">–°—Ä–µ–¥–Ω–∏–π (60-80 –∫–≥)</option>
            <option value="heavy">–¢—è–∂—ë–ª—ã–π (>80 –∫–≥)</option>
        </select>
        <button id="calculate">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
        <div id="result"></div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∞–±–ª–∏—Ü—ã
        const data = {
            hockey: {
                beginner: {
                    light: { inch: '1/2" - 5/8"', mm: '12.7 - 15.9' },
                    medium: { inch: '5/8" - 3/4"', mm: '15.9 - 19' },
                    heavy: { inch: '3/4" - 1"', mm: '19 - 25.4' }
                },
                intermediate: {
                    light: { inch: '7/16" - 1/2"', mm: '11.1 - 12.7' },
                    medium: { inch: '1/2" - 5/8"', mm: '12.7 - 15.9' },
                    heavy: { inch: '5/8" - 3/4"', mm: '15.9 - 19' }
                },
                advanced: {
                    light: { inch: '3/8" - 7/16"', mm: '9.5 - 11.1' },
                    medium: { inch: '7/16" - 1/2"', mm: '11.1 - 12.7' },
                    heavy: { inch: '1/2" - 5/8"', mm: '12.7 - 15.9' }
                }
            },
            figure_freestyle: {
                beginner: {
                    light: { inch: '1/2"', mm: '12.7' },
                    medium: { inch: '1/2" - 5/8"', mm: '12.7 - 15.9' },
                    heavy: { inch: '5/8"', mm: '15.9' }
                },
                intermediate: {
                    light: { inch: '7/16" - 1/2"', mm: '11.1 - 12.7' },
                    medium: { inch: '7/16"', mm: '11.1' },
                    heavy: { inch: '1/2"', mm: '12.7' }
                },
                advanced: {
                    light: { inch: '3/8" - 7/16"', mm: '9.5 - 11.1' },
                    medium: { inch: '3/8" - 7/16"', mm: '9.5 - 11.1' },
                    heavy: { inch: '7/16" - 1/2"', mm: '11.1 - 12.7' }
                }
            },
            figure_dance: {
                beginner: {
                    light: { inch: '1/2"', mm: '12.7' },
                    medium: { inch: '1/2" - 5/8"', mm: '12.7 - 15.9' },
                    heavy: { inch: '5/8"', mm: '15.9' }
                },
                intermediate: {
                    light: { inch: '7/16" - 1/2"', mm: '11.1 - 12.7' },
                    medium: { inch: '1/2"', mm: '12.7' },
                    heavy: { inch: '1/2" - 5/8"', mm: '12.7 - 15.9' }
                },
                advanced: {
                    light: { inch: '3/8" - 7/16"', mm: '9.5 - 11.1' },
                    medium: { inch: '7/16" - 1/2"', mm: '11.1 - 12.7' },
                    heavy: { inch: '1/2"', mm: '12.7' }
                }
            },
            speed_long: {
                all: {
                    any: { inch: 'Flat –∏–ª–∏ 1" - 1 1/4"', mm: '25.4 - 31.8' }
                }
            },
            speed_short: {
                all: {
                    any: { inch: '3/4" - 1"', mm: '19 - 25.4' }
                }
            }
        };

        // –ü–µ—Ä–µ–≤–æ–¥—ã
        const translations = {
            ru: {
                title: '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞—Ç–æ—á–∫–∏ –∫–æ–Ω—å–∫–æ–≤',
                themeLabel: '–¢–µ–º–∞:',
                langLabel: '–Ø–∑—ã–∫:',
                styleLabel: '–°—Ç–∏–ª—å –∫–∞—Ç–∞–Ω–∏—è:',
                levelLabel: '–£—Ä–æ–≤–µ–Ω—å –∫–∞—Ç–∞–Ω–∏—è:',
                weightLabel: '–í–µ—Å–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:',
                calculate: '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å',
                result: '–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π ROH: {inch} ({mm} –º–º)',
                styles: {
                    hockey: '–•–æ–∫–∫–µ–π (–∏–≥—Ä–æ–≤–æ–π)',
                    figure_freestyle: '–§–∏–≥—É—Ä–Ω–æ–µ (—Ñ—Ä–∏—Å—Ç–∞–π–ª)',
                    figure_dance: '–§–∏–≥—É—Ä–Ω–æ–µ (—Ç–∞–Ω—Ü—ã)',
                    speed_long: '–°–ø–∏–¥—Å–∫–µ–π—Ç–∏–Ω–≥ (–¥–ª–∏–Ω–Ω—ã–π —Ç—Ä–µ–∫)',
                    speed_short: '–°–ø–∏–¥—Å–∫–µ–π—Ç–∏–Ω–≥ (—à–æ—Ä—Ç-—Ç—Ä–µ–∫)'
                },
                levels: {
                    beginner: '–ù–æ–≤–∏—á–æ–∫',
                    intermediate: '–°—Ä–µ–¥–Ω–∏–π',
                    advanced: '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π'
                },
                weights: {
                    light: '–õ—ë–≥–∫–∏–π (<60 –∫–≥)',
                    medium: '–°—Ä–µ–¥–Ω–∏–π (60-80 –∫–≥)',
                    heavy: '–¢—è–∂—ë–ª—ã–π (>80 –∫–≥)'
                }
            },
            en: {
                title: 'Skate Sharpening Calculator',
                themeLabel: 'Theme:',
                langLabel: 'Language:',
                styleLabel: 'Skating Style:',
                levelLabel: 'Skating Level:',
                weightLabel: 'Weight Category:',
                calculate: 'Calculate',
                result: 'Recommended ROH: {inch} ({mm} mm)',
                styles: {
                    hockey: 'Hockey (Game)',
                    figure_freestyle: 'Figure (Freestyle)',
                    figure_dance: 'Figure (Dance)',
                    speed_long: 'Speed Skating (Long Track)',
                    speed_short: 'Speed Skating (Short Track)'
                },
                levels: {
                    beginner: 'Beginner',
                    intermediate: 'Intermediate',
                    advanced: 'Advanced'
                },
                weights: {
                    light: 'Light (<60 kg)',
                    medium: 'Medium (60-80 kg)',
                    heavy: 'Heavy (>80 kg)'
                }
            }
        };

        let currentLang = 'ru';
        let isDark = false;

        function updateLanguage() {
            const lang = translations[currentLang];
            document.getElementById('title').textContent = lang.title;
            document.getElementById('theme-label').textContent = lang.themeLabel;
            document.getElementById('lang-label').textContent = lang.langLabel;
            document.getElementById('style-label').textContent = lang.styleLabel;
            document.getElementById('level-label').textContent = lang.levelLabel;
            document.getElementById('weight-label').textContent = lang.weightLabel;
            document.getElementById('calculate').textContent = lang.calculate;
            document.getElementById('lang-icon').textContent = currentLang.toUpperCase();

            // –û–±–Ω–æ–≤–∏—Ç—å –æ–ø—Ü–∏–∏ —Å–µ–ª–µ–∫—Ç–æ–≤
            const styleSelect = document.getElementById('style');
            Object.keys(lang.styles).forEach((key, i) => {
                styleSelect.options[i].text = lang.styles[key];
            });
            const levelSelect = document.getElementById('level');
            Object.keys(lang.levels).forEach((key, i) => {
                levelSelect.options[i].text = lang.levels[key];
            });
            const weightSelect = document.getElementById('weight');
            Object.keys(lang.weights).forEach((key, i) => {
                weightSelect.options[i].text = lang.weights[key];
            });
        }

        function toggleTheme() {
            isDark = !isDark;
            document.body.classList.toggle('dark', isDark);
            document.getElementById('theme-icon').textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
        }

        function toggleLang() {
            currentLang = currentLang === 'ru' ? 'en' : 'ru';
            updateLanguage();
        }

        document.getElementById('theme-switch').addEventListener('change', toggleTheme);
        document.getElementById('lang-switch').addEventListener('change', toggleLang);

        document.getElementById('calculate').addEventListener('click', () => {
            const style = document.getElementById('style').value;
            const level = document.getElementById('level').value;
            const weight = document.getElementById('weight').value;

            let roh;
            if (style.startsWith('speed_')) {
                roh = data[style].all.any;
            } else {
                roh = data[style][level][weight];
            }

            if (roh) {
                const lang = translations[currentLang];
                const resultText = lang.result.replace('{inch}', roh.inch).replace('{mm}', roh.mm);
                document.getElementById('result').innerHTML = resultText;
            } else {
                document.getElementById('result').innerHTML = currentLang === 'ru' ? '–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã' : 'Data not found';
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateLanguage();

        // PWA Service Worker registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('Service Worker registered', reg))
                    .catch(err => console.error('Service Worker registration failed:', err));
            });
        }
    </script>
</body>
</html>